<main class="container">
  <section class="summary">
    <h2>Il tuo Piano di Studi</h2>
    <p>CFU Totali: <strong>{{ cfuTotali }}</strong> / 60</p>
    <p>Esami selezionati: <strong>{{ esamiSelezionati.length }}</strong></p>
  </section>

  <section class="study-plan">
    <h3>Seleziona gli esami</h3>
    <form (submit)="salvaPiano($event)">
      
      <label for="search">Cerca esame:</label>
      <input
        id="searchBar"
        type="text"
        placeholder="Es: INF001 o Analisi Matematica"
        (input)="onSearch($event)"
      />

      @for (esame of esamiFiltrati; track esame.codice) {
        <div class="course">
          <label>
            <input
              type="checkbox"
              [checked]="esame.selezionato"
              (change)="aggiornaSelezione($event, esame.codice)"
              name="{{ esame.codice }}"
            />
            {{ esame.codice }} - {{ esame.nome }} ({{ esame.cfu }} CFU)
          </label>
          @if (esame.note) {
            <p class="note">{{ esame.note }}</p>
          }
        </div>
      }

      <button type="submit">Salva Piano Studi</button>
    </form>
  </section>
</main>
