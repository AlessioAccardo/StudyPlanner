<main class = "container" *ngIf="user$ | async as user">
  @if (1>0){ 
    <section class = "libretto">
      <div class = "riquadro">
      <h2> Piano di studi </h2>
      <table>
        <thead>
        <tr> 
          <td> ID corso </td>
          <td> Nome corso </td>
          <td> CFU </td>
        </tr>
        </thead>
       <tbody>
        @for (course of courses; track course.id) {
        <tr>
          <td>{{ course.id }}</td>
          <td>{{ course.name }}</td>
          <td>{{ course.credits }} CFU</td>
          <td> 
            <button (click)="salvaPiano(course.id)">Aggiungi</button></td>
        </tr>
      }
      </tbody>
      </table> 
      </div> 
   </section>
}


<!-- CREAZIONE CORSI SEGRETERIA -->
@if(1>0) {
  <section class = "segreteria">
    <div class ="riquadri">
      <div class = "riquadro">
        <h2>Crea un Nuovo Corso</h2>
        <form id = "Crea nuovo corso">
          <table>
            <tbody>
              <tr>
                <td><label for = "courseName"> Nome corso</label></td>
                <td> <input id = "courseName" #nameInput name = "name" required>
                </td>
              </tr>
              <tr>
                <td><label for = "professor"> Professore </label></td>
                <td> 
                  <select #prof_id id="professor"  name = "professor_id" required>
                  @for(prof of professors; track prof.id){
                  <option [value] = "prof.id" disabled selected> {{ prof.id }}, {{ prof.first_name }} {{ prof.last_name }}</option>
              }
                   </select>
                </td>
              </tr>
              <tr>
                <td><label for = "credits"> Crediti (CFU) </label></td>
                <td>
                  <input id = "credits" #creditsInput name = "credits" required>
                </td>
              </tr>
              <tr>
              <td><button (click) = "createCourse(nameInput, prof_id, creditsInput)"> Crea </button>
              </td>
              </tr>
            </tbody>
          </table>
        </form>
      </div>
      <div class="riquadro">
        <h2>Elenco Corsi</h2>
        @if(courses.length != 0){
          <table>
            <thead>
              <tr>
                <th>ID</th>
                <th>Corso</th>
                <th>ID Professore</th>
                <th>Professore</th>
                <th>CFU</th>
              </tr>
            </thead>
            <tbody>
              @for(course of courses; track course.id){
                <tr>
                  <td> {{course.id }}</td>
                  <td> {{ course.name }}</td>
                  <td> {{ course.professor_id }}</td>
                  <td> {{ professorMap[course.professor_id].first_name }}  {{ professorMap[course.professor_id].last_name }} </td>
                  <td> {{ course.credits }}</td>
                </tr>
              }
            </tbody>
          </table>
        } @else {
          <p>Nessun corso creato al momento.</p>
        }
      </div>
    </div>
  </section>
}
